# =============================================================================
# JubileeInternet.com - Environment Configuration Template
# =============================================================================
# Copy this file to .env in the project root and fill in the values.
# NEVER commit the actual .env file to version control.
# =============================================================================

# -----------------------------------------------------------------------------
# Environment
# -----------------------------------------------------------------------------
# Options: development, staging, production
NODE_ENV=development

# -----------------------------------------------------------------------------
# Server
# -----------------------------------------------------------------------------
PORT=3000
HOST=0.0.0.0

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
# PostgreSQL connection string
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://jubilee_sso:password@localhost:5432/jubilee_sso

# Connection pool settings
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# -----------------------------------------------------------------------------
# JWT / Token Signing
# -----------------------------------------------------------------------------
# IMPORTANT: Generate unique keys for each environment
# Use: openssl genrsa -out private.pem 2048
# Use: openssl rsa -in private.pem -pubout -out public.pem

# RSA Private Key (PEM format, for signing tokens)
# Paste the entire key including BEGIN/END markers
JWT_SIGNING_KEY="-----BEGIN RSA PRIVATE KEY-----
...your private key here...
-----END RSA PRIVATE KEY-----"

# RSA Public Key (PEM format, for verifying tokens)
JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----
...your public key here...
-----END PUBLIC KEY-----"

# Signing algorithm (RS256, RS384, RS512, ES256, ES384, ES512)
JWT_ALGORITHM=RS256

# Token lifetimes (in seconds)
JWT_ACCESS_TOKEN_TTL=900      # 15 minutes
JWT_REFRESH_TOKEN_TTL=604800  # 7 days
JWT_ID_TOKEN_TTL=3600         # 1 hour

# -----------------------------------------------------------------------------
# Issuer
# -----------------------------------------------------------------------------
# The base URL of the SSO service (used in token 'iss' claim)
# Must be HTTPS in production
ISSUER_URL=https://localhost:3000

# -----------------------------------------------------------------------------
# Session
# -----------------------------------------------------------------------------
# Secret for session encryption (min 32 characters)
# Generate with: openssl rand -base64 32
SESSION_SECRET=your-session-secret-at-least-32-characters

# Session duration in seconds
SESSION_TTL=86400  # 24 hours

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
# bcrypt hashing rounds (higher = more secure but slower)
BCRYPT_ROUNDS=12

# Account lockout settings
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION=900  # 15 minutes in seconds

# Authorization code lifetime
AUTH_CODE_TTL=600  # 10 minutes

# -----------------------------------------------------------------------------
# CORS
# -----------------------------------------------------------------------------
# Comma-separated list of allowed origins
# Leave empty to allow all origins (development only!)
CORS_ORIGINS=https://browser.jubilee.com,https://bible.jubilee.com

# -----------------------------------------------------------------------------
# TLS (Local Development)
# -----------------------------------------------------------------------------
# Paths to TLS certificate files for local HTTPS
# Leave empty to use HTTP (not recommended even for development)
TLS_CERT_PATH=./certs/dev/localhost.crt
TLS_KEY_PATH=./certs/dev/localhost.key

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# Log level: trace, debug, info, warn, error, fatal
LOG_LEVEL=info

# Pretty print logs (set to true for development)
LOG_PRETTY=true
